# Globalias expands glob expressions, subcommands, & aliases (including global)

globalias() {
   # https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/globalias "globalias"
   # Get word to left of cursor
   # (z) => split line into an array
   # (A) => perform an array assignment
   # (I) => match index; start matching from end
   # (e) => force value to be rescanned for all forms of single-word substitution
   # https://zsh.sourceforge.io/Guide/zshguide05.html "Chapter 5: Substitutions"
   local word=${${(Az)LBUFFER}[-1]}
   if [[ $GLOBALIAS_FILTER_VALUES[(Ie)$word] -eq 0 ]]; then
      zle _expand_alias
      zle expand-word
   fi
   zle self-insert
}
zle -N globalias

# space expands all aliases, including global
bindkey -M emacs " " globalias
bindkey -M viins " " globalias

# control-space to make a normal space
bindkey -M emacs "^ " magic-space
bindkey -M viins "^ " magic-space

# normal space during searches
bindkey -M isearch " " magic-space#!/usr/local/bin/zsh
